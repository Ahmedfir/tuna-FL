# Dataset Package

## What is it?

The bug collector package collect real bug fixes from apache commons projects by linking bug ids present in the commit message of the project to information available on the bug tracker. Information contains in the dataset are the following:

- hash
- timestamp
- message
- identifier
- affected versions
- fixes (files in their states before and after fix)
    
## Why? 

In the context of the TUNA project, and more specifically the paper "On the Impact of Tokenizer and Parameters on N-Gram Based Code Analysis" published at ICSME'18 a dataset of real defects was required to evaluate whether the use of different tokenizer were capable of troubling the outcome of research based on naturalness. This leads to the creation of this dataset denerator tool that is close to the vulnerability one available at this link : [data7](https://github.com/electricalwind/data7) at it share most of its code.

## Requirements

There is no requirement for this tool, as maven will take care of all dependencies.

## How does it work ?

For a given project P supported by the tool:

1. clone or pull P in the chosen folder
2. analyse all commits in the history of the project, check for a mention to a bug id, if found keep the commit and the bug id
3. For each selected commit, check on the bug tracker whether the bug id correspond to a real bug, if yes retrieve all information on the bug. 


## Dataset Structure
          
The dataset generated by the tool is only available through its binary serialized form and can be access through the following api:
![schema](img/diagram.png)

When calling upon the creation of the dataset for a project P, a list of Bug will be returned. A bug object here correspond to a commit that was declared as a Bug fix and contains the following information, the hash, message and timestamp of the commit, the bug id as well as the version of the project that were affected by it and a list of all the file that were fixed (Fix Object). A fix Object contains the information on the file before and after it was fix as well as the hash of the last commit that modified it before the fix.


## Supported projects

So far, only project from the apache commons are supported as the rest interface from apache jira is used to check for the bug id.

* Bcel
*  BeansUtils
*  Cli
*  Collections
*  Configuration
*  Compress
*  CSV
*  DBUtils
*  EMail
*  FileUpload
*  Io
*  JCS
*  Jexl
*  Lang
*  Math
*  Net
*  Pool
*  Rng
*  Text
*  Vfs

Note that the tool can be extended to additional projects, but those needs to be present on this bugtracker [jira](https://issues.apache.org/jira/secure/Dashboard.jspa)
and the information of the Software class made available:

````java
/**
 * Software
 * A class gathering the required intel on a software project to create the dataset
 * it contains:
 *  the name of the software
 *  the abreviation used for issues
 *  the url of the git remote repository
 *  and A list of all versions of the software and their corresponding commit
 */
public class Software implements Serializable {
    private final String name;
    private final String abreviation;
    private final String gitUrl;
    private final Map<String, String> versions;

    public Software(String name, String abreviation, String gitUrl, Map<String, String> versions) {
        this.name = name;
        this.abreviation = abreviation;
        this.gitUrl = gitUrl;
        this.versions = versions;
    }
}
````

## How to use the tools

To build a dataset, simply chose a project and
```java 

``` 
    

## Statistics



## Third Party